---
title: "Shiny"
author: "Jarad Niemi"
date: "`r Sys.Date()`"
output:
  html_document:
    toc: yes
    toc_float: yes
layout: page
---

```{r setup, include=FALSE, purl=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

[R code](26-shiny.R)

```{r packages}
library("tidyverse"); theme_set(theme_bw())
library("Sleuth3")
library("shiny")
```

Shiny applications are interactive websites dashdboards built using R and 
produced using an R Server backend.
They are much more flexible in what you can do compared to using packages that 
allow for interactive tables and figures. 
Due to the backend requirement, 
they are not as easy to deploy as the approaches we discussed as the 
interactive tables and figures.
My guess is that shiny 2.0 will utilize javascript and avoid the R server 
backend, but we'll have to wait and see. 

The backend requirement can be avoided by utilizing Posit's 
[shinyapps.io](https://www.shinyapps.io/). 
The downside to using this deployment platform is that you are limited in the 
amount of monthly use on your app. 

Take a look at some shiny apps on the 
[Shiny Gallery](https://shiny.rstudio.com/gallery/) to get an idea of what shiny
can do. 

# Examples

Let's take a look at some examples to see what R shiny can do. 

## Diamonds example

Let's explore this 
[Radiant app](https://shiny.rstudio.com/gallery/radiant.html)
by Vincent Nijs. 

## Simple example

```{r shiny-simple-ui, eval=FALSE}
ui <- fluidPage(
  titlePanel("2-D Histogram with Hexes!"),
  
  sidebarLayout(
    sidebarPanel(
      checkboxInput(inputId = "logx", label = "Log Carat"),
      checkboxInput(inputId = "logy", label = "Log Price"),
      
      textInput(inputId = "low",  label = "Low color",  value = "gray"),
      textInput(inputId = "high", label = "High color", value = "blue"),
    ),
    mainPanel(
      plotOutput(outputId = "hexbinPlot")
    )
  )
)
```

```{r shiny-simple-server, eval=FALSE}
server <- function(input, output) {
  output$hexbinPlot <- renderPlot({
    g <- ggplot(diamonds, aes(x = carat, y = price)) + 
      geom_hex() +
      theme_bw() + 
      labs(
        title = "Diamonds: Price vs Carat",
        x     = "Carat",
        y     = "Price ($)"
      ) +
      scale_fill_gradient(
        low  = input$low,
        high = input$high
      ) 
    
    if (input$logx) 
      g <- g + scale_x_log10()    
    
    if (input$logy) 
      g <- g + scale_y_log10()
    
    g
  })
}
```

```{r, shiny-simple, eval=FALSE}
shinyApp(ui = ui, server = server)
```



# User-interface

## Input

```{r, eval=FALSE}
ui <- fluidPage(
  titlePanel("User input options"),
  
  column(width = 3, 
    actionButton("action",
                 label = "actionButton"),
    
    fileInput("file", 
              label = "File input"),
    
    textInput("text", 
              label = "Text")
  ), 
  column(width = 3,
    checkboxInput("checkbox",
                  label = "Checkbox"),
    
    checkboxGroupInput("checkboxGroup",
                       label = "Checkbox Group", 
                       choices = c("A","B","C")),
    
    radioButtons("radioButtons",
                 label = "Radio Buttons", 
                 choices = c("A","B","C")),
    
    selectInput("select", 
                label = "Select", 
                choices = c("A","B","C"))
  ),
  column(width = 3,
    numericInput("numeric",
                 label = "Numeric", value = 0),
    
    sliderInput("slider", 
                label = "Slider", 
                min = 0, max = 10, value = 5, step = 1),
    
    sliderInput("slider", 
                label = "Slider", 
                min = 0, max = 10, value = c(3,7), step = 1)
  ),
  column(width = 3,
         dateInput("date",
                   label = "Date"),
         
         dateRangeInput("daterange", 
                        label = "Date range"),
         
         helpText(h3("Help text"),
                  "Here is some help text.")
         )
)

shinyApp(ui = ui, server = function(input, output) {} )
```

## Output

### Text

```{r, eval=FALSE}
ui <- fluidPage(
  titlePanel("Here is text output!"),
  
  textOutput("text")
)

server <- function(input, output) {
  output$text <- renderText({
    "Here's some text"
  })
}

shinyApp(ui = ui, server = server)
```

### Table

```{r, eval=FALSE}
ui <- fluidPage(
  titlePanel("Here is table output!"),
  
  tableOutput('table')
)

server <- function(input, output) {
  output$table <- renderTable(warpbreaks)
}

shinyApp(ui = ui, server = server)
```

### DataTable

```{r, eval=FALSE}
ui <- fluidPage(
  titlePanel("Here is datatable output!"),
  
  dataTableOutput('table')
)

server <- function(input, output) {
  output$table <- renderDataTable(warpbreaks)
}

shinyApp(ui = ui, server = server )
```

### Plot

```{r, eval=FALSE}
ui <- fluidPage(
  titlePanel("Here is plot output!"),
  
  plotOutput("plot")
)

server <- function(input, output) {
  output$plot <- renderPlot({
    hist(rnorm(100))
  })
}

shinyApp(ui = ui, server = server)
```

```{r, eval=FALSE}
ui <- fluidPage(
  titlePanel("Here is print output!"),
  
  verbatimTextOutput("print")
)

server <- function(input, output) {
  output$print <- renderPrint({
    m <- lm(breaks ~ tension + wool, data = warpbreaks)
    summary(m)
  })
}

shinyApp(ui = ui, server = server)
```




# Server

